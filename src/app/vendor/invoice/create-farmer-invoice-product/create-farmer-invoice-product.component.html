<div class="row mt-5"><div class="col-12"></div></div>

<form [formGroup]="form" (ngSubmit)="submit()">
  <div class="row">
    <div class="col-12">
      <div class="row flex-row-reverse">
        <div class="col-md-12">
          <input  type="submit" value="create invoice" class="btn btn-outline-primary  btn-sm p-2">

        </div>
        <div class="col-6">
          <label  class="rtl float-right text-secondary p-2" for="farmer">کشاورز</label>
          <select class="form-control rtl" formControlName="farmer_id" id="farmer" >
            <option [ngValue]="null"></option>
            <option *ngFor="let item of connections" [ngValue]="item.farmer_id">{{item.farmer?.full_name||item.farmer_name_set_vendor}}</option>
          </select>
        </div>
        <div class="col-6">
          <label  class="rtl float-right text-secondary p-2" for="farmer">تاریخ</label>
          <input type="text" class="form-control text-center" formControlName="date" />
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <br>
      <hr>
    </div>
  </div>


  <div class="row mt-1">
    <div class="col-12 col-sm-6 mt-2 col-md-6 text-center">
      <input (click)="append_product()" type="button" value="اضافه کردن محصول " class="btn btn-block btn-info btn-sm ">
    </div>
    <div class="col-12 col-sm-6 mt-2 col-md-6 text-center">
      <input (click)="append_delivery()" type="button" value="اضافه کردن راننده" class="btn btn-block btn-info btn-sm">
    </div>
  </div>


  <div class="row">
    <div class="col-md-12">
      <br>
      <hr>
    </div>
  </div>




  <div class="row" >
    <div class="col-12">


      <mat-tab-group mat-stretch-tabs>
        <mat-tab label="محصولات">
          <div class="row mt-3">
            <div class="col-12">
              <table class="table table-bordered table-sm " *ngIf="products.length != 0">
                <thead class="thead-dark rtl ">
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">category</th>
                    <th scope="col">fruit</th>
                    <th scope="col">value</th>
                    <th scope="col">count</th>
                    <th scope="col">action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr  *ngFor="let item of products;let index = index">
                    <th scope="row">{{index}}</th>
                    <td>{{item.category.category_name}}</td>
                    <td>{{item.fruit.fruit_name}}</td>
                    <td>{{item.value}} - {{item.value_type.type_name}}</td>
                    <td>{{item.count_box}}</td>
                    <td>
                      <input type="button" class="btn-link btn text-danger" value=" حذف " (click)="delete_product(item)">
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </mat-tab>
        <mat-tab label="راننده">
          <div class="row mt-3">
            <div class="col-12">
              <table class="table table-bordered table-sm " *ngIf="deliveries.length != 0">
                <thead class="thead-dark rtl ">
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">نام راننده</th>
                    <th scope="col">توضیحات</th>
                    <th scope="col">مبلغ کرایه</th>
                    <th scope="col">action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr  *ngFor="let item of deliveries;let index = index">
                    <th scope="row">{{index}}</th>
                    <td>{{item.full_name_driver||'تنظیم نشده'}}</td>
                    <td>{{item.description||'تنظیم نشده'}}</td>
                    <td>{{(item.amount_rent_delivery|number)||'تنظیم نشده'}}</td>
                    <td>
                      <input type="button" class="btn-link btn text-danger" value=" حذف  " (click)="delete_delivery(item)">
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

        </mat-tab>
      </mat-tab-group>



    </div>
    <div class="col-4">

    </div>
  </div>
</form>
